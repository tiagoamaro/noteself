<% content_for :title, "Editing note" %>

<div class="md:w-2/3 w-full" data-controller="note-sync" data-note-sync-note-id-value="<%= @note.id %>">
  <h1 class="font-bold text-4xl mb-5">Editing note</h1>
  <div class="flex items-center gap-2 mb-5">
    <p class="text-sm text-gray-500">Last updated: <%= @note.updated_at.strftime("%B %d, %Y at %I:%M %p") %></p>
    <div class="relative w-5 h-5">
      <span data-note-sync-target="spinner" class="absolute inset-0 opacity-0 scale-0 transition-all duration-300 ease-in-out">
        <%= lucide_icon("loader-2", class: "w-5 h-5 text-blue-600 animate-spin") %>
      </span>
      <span data-note-sync-target="successIcon" class="absolute inset-0 opacity-0 scale-0 transition-all duration-300 ease-in-out">
        <%= lucide_icon("check-square", class: "w-5 h-5 text-green-600") %>
      </span>
    </div>
  </div>
  <%= link_to "Back to notes", notes_path, class: "rounded-md px-3.5 py-2.5 bg-gray-100 hover:bg-gray-50 inline-block font-medium mb-5" %>

  <%= render "form", note: @note %>

  <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 mt-5">
    <div class="flex flex-col sm:flex-row gap-2">
      <%= link_to "Show this note", @note, class: "w-full sm:w-auto text-center rounded-md px-3.5 py-2.5 bg-gray-100 hover:bg-gray-50 inline-block font-medium" %>
      <%= link_to "Back to notes", notes_path, class: "w-full sm:w-auto text-center rounded-md px-3.5 py-2.5 bg-gray-100 hover:bg-gray-50 inline-block font-medium" %>
    </div>
    <%= button_to "Destroy", @note, method: :delete, class: "w-full sm:w-auto rounded-md px-3.5 py-2.5 text-white bg-red-600 hover:bg-red-500 font-medium cursor-pointer", data: { turbo_confirm: "Are you sure?" } %>
  </div>
</div>
